(function(i,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(i=typeof globalThis<"u"?globalThis:i||self,o(i.ToifeGesture={}))})(this,(function(i){"use strict";let o=[];const p=(n,t=!1)=>{if(o.length==0)return!0;if(t){let r=o[o.length-1];return n.target===r||r.contains(n.target)}for(let r of o)if(n.target===r||r.contains(n.target))return!0;return!1},T=n=>{o.push(n)},G=n=>{n?o.splice(o.indexOf(n),1):o.pop()},S=()=>{o=[]},j=(n,t={})=>{let r,f,b;const w=t?.options?.minDist||0,A=t?.options?.maxDuration||280,k=t?.options?.minVelocity||.5,L=e=>{p(e)&&(t?.beforeEvent&&!t.beforeEvent(e)||(r=e.clientX,f=e.clientY,b=performance.now(),t.down&&t.down({sx:r,sy:f,st:b,e}),t?.afterEvent&&t.afterEvent(e)))},d=e=>{if(!p(e)||t?.beforeEvent&&!t.beforeEvent(e))return;const u=e.clientX-r,v=e.clientY-f,a=Math.abs(u),c=Math.abs(v);let s;(a>=0||c>=0)&&(a>c?s=u>0?"right":"left":s=v>0?"down":"up"),t.move&&t.move({d:s,ex:e.clientX,ey:e.clientY,e,sx:r,sy:f,dx:u,dy:v}),t?.afterEvent&&t.afterEvent(e)},M=e=>{if(!p(e)||t?.beforeEvent&&!t.beforeEvent(e))return;const u=e.clientX,v=e.clientY,a=performance.now(),c=u-r,s=v-f,m=a-b,E=Math.abs(c),l=Math.abs(s);if(t.fast&&m<=A&&(E>=w||l>=w)){const Y=E/m,D=l/m;if(Y>=k||D>=k){let g;E>l?g=c>0?"right":"left":g=s>0?"down":"up",t.fast({e,d:g,dx:c,dy:s,dt:m,vx:Y,vy:D}),t?.afterEvent&&t.afterEvent(e);return}}let y;(E>=0||l>=0)&&(E>l?y=c>0?"right":"left":y=s>0?"down":"up"),t.up&&t.up({d:y,e,ex:u,ey:v,sx:r,sy:f,dx:c,dy:s}),t?.afterEvent&&t.afterEvent(e)},X=e=>{p(e)&&(t?.beforeEvent&&!t.beforeEvent(e)||(t.cancel&&t.cancel(),t?.afterEvent&&t.afterEvent(e)))};return n.addEventListener("pointerdown",L),n.addEventListener("pointermove",d),n.addEventListener("pointerup",M),n.addEventListener("pointercancel",X),{destroy:()=>{n.removeEventListener("pointerdown",L),n.removeEventListener("pointermove",d),n.removeEventListener("pointerup",M),n.removeEventListener("pointercancel",X)},cancel:()=>{t.cancel&&t.cancel()}}};i.gesture=j,i.isGesturable=p,i.lock=T,i.unlock=G,i.unlockAll=S,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})}));
