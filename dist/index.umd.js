(function(i,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(i=typeof globalThis<"u"?globalThis:i||self,o(i.ToifeGesture={}))})(this,(function(i){"use strict";let o=[];const T=n=>{if(o.length==0)return!0;for(let t of o)if(n==t||t.contains(n))return!0;return!1},G=n=>{o.push(n)},S=n=>{if(!n)o.pop();else{let t=o.indexOf(n);t>-1&&o.splice(t,1)}},j=()=>{o=[]},A=(n,t={})=>{let c,f,l;const d=t?.options?.minDist||0,O=t?.options?.maxDuration||280,w=t?.options?.minVelocity||.5,L=e=>{t?.beforeEvent&&!t.beforeEvent(e)||(c=e.clientX,f=e.clientY,l=performance.now(),t.down&&t.down({sx:c,sy:f,st:l,e}),t?.afterEvent&&t.afterEvent(e))},g=e=>{if(t?.beforeEvent&&!t.beforeEvent(e))return;const v=e.clientX-c,u=e.clientY-f,m=Math.abs(v),r=Math.abs(u);let s;(m>=0||r>=0)&&(m>r?s=v>0?"right":"left":s=u>0?"down":"up"),t.move&&t.move({d:s,ex:e.clientX,ey:e.clientY,e,sx:c,sy:f,dx:v,dy:u}),t?.afterEvent&&t.afterEvent(e)},M=e=>{if(t?.beforeEvent&&!t.beforeEvent(e))return;const v=e.clientX,u=e.clientY,m=performance.now(),r=v-c,s=u-f,a=m-l,p=Math.abs(r),E=Math.abs(s);if(t.fast&&a<=O&&(p>=d||E>=d)){const Y=p/a,D=E/a;if(Y>=w||D>=w){let y;p>E?y=r>0?"right":"left":y=s>0?"down":"up",t.fast({e,d:y,dx:r,dy:s,dt:a,vx:Y,vy:D}),t?.afterEvent&&t.afterEvent(e);return}}let b;(p>=0||E>=0)&&(p>E?b=r>0?"right":"left":b=s>0?"down":"up"),t.up&&t.up({d:b,e,ex:v,ey:u,sx:c,sy:f,dx:r,dy:s}),t?.afterEvent&&t.afterEvent(e)},X=e=>{t?.beforeEvent&&!t.beforeEvent(e)||(t.cancel&&t.cancel(),t?.afterEvent&&t.afterEvent(e))};return n.addEventListener("pointerdown",L),n.addEventListener("pointermove",g),n.addEventListener("pointerup",M),n.addEventListener("pointercancel",X),{destroy:()=>{n.removeEventListener("pointerdown",L),n.removeEventListener("pointermove",g),n.removeEventListener("pointerup",M),n.removeEventListener("pointercancel",X)},cancel:()=>{t.cancel&&t.cancel()}}};i.descope=S,i.descopeAll=j,i.gesture=A,i.isGesturable=T,i.scope=G,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})}));
