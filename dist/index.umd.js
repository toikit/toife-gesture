(function(r,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(r=typeof globalThis<"u"?globalThis:r||self,o(r.ToifeGesture={}))})(this,(function(r){"use strict";let o=[];const p=(n,t=!1)=>{if(o.length==0)return!0;if(t){let i=o[o.length-1];return n.target===i||i.contains(n.target)}for(let i of o)if(n.target===i||i.contains(n.target))return!0;return!1},T=n=>{o.push(n)},G=n=>{if(!n)o.pop();else{let t=o.indexOf(n);t>-1&&o.splice(t,1)}},S=()=>{o=[]},j=(n,t={})=>{let i,f,b;const w=t?.options?.minDist||0,A=t?.options?.maxDuration||280,d=t?.options?.minVelocity||.5,k=e=>{p(e)&&(t?.beforeEvent&&!t.beforeEvent(e)||(i=e.clientX,f=e.clientY,b=performance.now(),t.down&&t.down({sx:i,sy:f,st:b,e}),t?.afterEvent&&t.afterEvent(e)))},L=e=>{if(!p(e)||t?.beforeEvent&&!t.beforeEvent(e))return;const u=e.clientX-i,v=e.clientY-f,a=Math.abs(u),c=Math.abs(v);let s;(a>=0||c>=0)&&(a>c?s=u>0?"right":"left":s=v>0?"down":"up"),t.move&&t.move({d:s,ex:e.clientX,ey:e.clientY,e,sx:i,sy:f,dx:u,dy:v}),t?.afterEvent&&t.afterEvent(e)},M=e=>{if(!p(e)||t?.beforeEvent&&!t.beforeEvent(e))return;const u=e.clientX,v=e.clientY,a=performance.now(),c=u-i,s=v-f,m=a-b,l=Math.abs(c),E=Math.abs(s);if(t.fast&&m<=A&&(l>=w||E>=w)){const Y=l/m,D=E/m;if(Y>=d||D>=d){let g;l>E?g=c>0?"right":"left":g=s>0?"down":"up",t.fast({e,d:g,dx:c,dy:s,dt:m,vx:Y,vy:D}),t?.afterEvent&&t.afterEvent(e);return}}let y;(l>=0||E>=0)&&(l>E?y=c>0?"right":"left":y=s>0?"down":"up"),t.up&&t.up({d:y,e,ex:u,ey:v,sx:i,sy:f,dx:c,dy:s}),t?.afterEvent&&t.afterEvent(e)},X=e=>{p(e)&&(t?.beforeEvent&&!t.beforeEvent(e)||(t.cancel&&t.cancel(),t?.afterEvent&&t.afterEvent(e)))};return n.addEventListener("pointerdown",k),n.addEventListener("pointermove",L),n.addEventListener("pointerup",M),n.addEventListener("pointercancel",X),{destroy:()=>{n.removeEventListener("pointerdown",k),n.removeEventListener("pointermove",L),n.removeEventListener("pointerup",M),n.removeEventListener("pointercancel",X)},cancel:()=>{t.cancel&&t.cancel()}}};r.gesture=j,r.isGesturable=p,r.lock=T,r.unlock=G,r.unlockAll=S,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})}));
