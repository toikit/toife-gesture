(function(i,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(i=typeof globalThis<"u"?globalThis:i||self,o(i.ToifeGesture={}))})(this,(function(i){"use strict";let o=[];const p=n=>{if(o.length==0)return!0;for(let t of o)if(n==t||t.contains(n))return!0;return!1},S=n=>{o.push(n)},j=n=>{if(!n)o.pop();else{let t=o.indexOf(n);t>-1&&o.splice(t,1)}},A=()=>{o=[]},O=(n,t={})=>{let c,f,y;const a=t?.options?.minMove||5,w=t?.options?.minDist||60,V=t?.options?.maxDuration||280,L=t?.options?.minVelocity||.5,M=e=>{p(e.target)&&(t?.beforeEvent&&!t.beforeEvent(e)||(c=e.clientX,f=e.clientY,y=performance.now(),t.down&&t.down({sx:c,sy:f,st:y,e}),t?.afterEvent&&t.afterEvent(e)))},X=e=>{if(!p(e.target)||t?.beforeEvent&&!t.beforeEvent(e))return;const v=e.clientX-c,u=e.clientY-f,b=Math.abs(v),s=Math.abs(u);let r;(b>=a||s>=a)&&(b>s?r=v>0?"right":"left":r=u>0?"down":"up"),t.move&&t.move({d:r,ex:e.clientX,ey:e.clientY,e,sx:c,sy:f,dx:v,dy:u}),t?.afterEvent&&t.afterEvent(e)},Y=e=>{if(!p(e.target)||t?.beforeEvent&&!t.beforeEvent(e))return;const v=e.clientX,u=e.clientY,b=performance.now(),s=v-c,r=u-f,l=b-y,E=Math.abs(s),m=Math.abs(r);if(t.fast&&l<=V&&(E>=w||m>=w)){const T=E/l,G=m/l;if(T>=L||G>=L){let d;E>m?d=s>0?"right":"left":d=r>0?"down":"up",t.fast({e,d,dx:s,dy:r,dt:l,vx:T,vy:G}),t?.afterEvent&&t.afterEvent(e);return}}let g;(E>=a||m>=a)&&(E>m?g=s>0?"right":"left":g=r>0?"down":"up"),t.up&&t.up({d:g,e,ex:v,ey:u,sx:c,sy:f,dx:s,dy:r}),t?.afterEvent&&t.afterEvent(e)},D=e=>{p(e.target)&&(t?.beforeEvent&&!t.beforeEvent(e)||(t.cancel&&t.cancel(),t?.afterEvent&&t.afterEvent(e)))};return n.addEventListener("pointerdown",M),n.addEventListener("pointermove",X),n.addEventListener("pointerup",Y),n.addEventListener("pointercancel",D),{destroy:()=>{n.removeEventListener("pointerdown",M),n.removeEventListener("pointermove",X),n.removeEventListener("pointerup",Y),n.removeEventListener("pointercancel",D)},cancel:()=>{t.cancel&&t.cancel()}}};i.descope=j,i.descopeAll=A,i.gesture=O,i.isGesturable=p,i.scope=S,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})}));
