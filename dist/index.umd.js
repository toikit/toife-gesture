(function(i,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(i=typeof globalThis<"u"?globalThis:i||self,o(i.ToifeGesture={}))})(this,(function(i){"use strict";let o=[];const p=n=>{if(o.length==0)return!0;for(let t of o)if(n==t||t.contains(n))return!0;return!1},G=n=>{o.push(n)},S=n=>{if(!n)o.pop();else{let t=o.indexOf(n);t>-1&&o.splice(t,1)}},j=()=>{o=[]},A=(n,t={})=>{let c,f,b;const g=t?.options?.minDist||0,O=t?.options?.maxDuration||280,w=t?.options?.minVelocity||.5,L=e=>{p(e.target)&&(t?.beforeEvent&&!t.beforeEvent(e)||(c=e.clientX,f=e.clientY,b=performance.now(),t.down&&t.down({sx:c,sy:f,st:b,e}),t?.afterEvent&&t.afterEvent(e)))},M=e=>{if(!p(e.target)||t?.beforeEvent&&!t.beforeEvent(e))return;const u=e.clientX-c,v=e.clientY-f,m=Math.abs(u),s=Math.abs(v);let r;(m>=0||s>=0)&&(m>s?r=u>0?"right":"left":r=v>0?"down":"up"),t.move&&t.move({d:r,ex:e.clientX,ey:e.clientY,e,sx:c,sy:f,dx:u,dy:v}),t?.afterEvent&&t.afterEvent(e)},X=e=>{if(!p(e.target)||t?.beforeEvent&&!t.beforeEvent(e))return;const u=e.clientX,v=e.clientY,m=performance.now(),s=u-c,r=v-f,l=m-b,E=Math.abs(s),a=Math.abs(r);if(t.fast&&l<=O&&(E>=g||a>=g)){const D=E/l,T=a/l;if(D>=w||T>=w){let d;E>a?d=s>0?"right":"left":d=r>0?"down":"up",t.fast({e,d,dx:s,dy:r,dt:l,vx:D,vy:T}),t?.afterEvent&&t.afterEvent(e);return}}let y;(E>=0||a>=0)&&(E>a?y=s>0?"right":"left":y=r>0?"down":"up"),t.up&&t.up({d:y,e,ex:u,ey:v,sx:c,sy:f,dx:s,dy:r}),t?.afterEvent&&t.afterEvent(e)},Y=e=>{p(e.target)&&(t?.beforeEvent&&!t.beforeEvent(e)||(t.cancel&&t.cancel(),t?.afterEvent&&t.afterEvent(e)))};return n.addEventListener("pointerdown",L),n.addEventListener("pointermove",M),n.addEventListener("pointerup",X),n.addEventListener("pointercancel",Y),{destroy:()=>{n.removeEventListener("pointerdown",L),n.removeEventListener("pointermove",M),n.removeEventListener("pointerup",X),n.removeEventListener("pointercancel",Y)},cancel:()=>{t.cancel&&t.cancel()}}};i.descope=S,i.descopeAll=j,i.gesture=A,i.isGesturable=p,i.scope=G,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})}));
